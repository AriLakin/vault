<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoLaunch - 功能测试</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .test-item { @apply border border-gray-600 rounded-lg p-4 mb-4; }
        .test-pass { @apply bg-green-900/30 border-green-500; }
        .test-fail { @apply bg-red-900/30 border-red-500; }
        .test-pending { @apply bg-yellow-900/30 border-yellow-500; }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-8">🧪 CryptoLaunch 功能测试</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="test-item test-pending" id="test-load">
                <h3 class="font-semibold mb-2">📄 页面加载</h3>
                <p class="text-sm text-gray-300">检查页面是否正常加载</p>
                <div class="mt-2 text-xs" id="load-status">检测中...</div>
            </div>
            
            <div class="test-item test-pending" id="test-ethers">
                <h3 class="font-semibold mb-2">🔗 Ethers.js 库</h3>
                <p class="text-sm text-gray-300">检查 Ethers.js 是否正常加载</p>
                <div class="mt-2 text-xs" id="ethers-status">检测中...</div>
            </div>
            
            <div class="test-item test-pending" id="test-metamask">
                <h3 class="font-semibold mb-2">🦊 MetaMask 检测</h3>
                <p class="text-sm text-gray-300">检查是否安装 MetaMask</p>
                <div class="mt-2 text-xs" id="metamask-status">检测中...</div>
            </div>
            
            <div class="test-item test-pending" id="test-navigation">
                <h3 class="font-semibold mb-2">🧭 页面导航</h3>
                <p class="text-sm text-gray-300">检查页面间导航功能</p>
                <div class="mt-2 text-xs" id="nav-status">检测中...</div>
            </div>
            
            <div class="test-item test-pending" id="test-contracts">
                <h3 class="font-semibold mb-2">📋 合约配置</h3>
                <p class="text-sm text-gray-300">检查智能合约地址配置</p>
                <div class="mt-2 text-xs" id="contract-status">检测中...</div>
            </div>
            
            <div class="test-item test-pending" id="test-ui">
                <h3 class="font-semibold mb-2">🎨 UI 组件</h3>
                <p class="text-sm text-gray-300">检查关键 UI 元素</p>
                <div class="mt-2 text-xs" id="ui-status">检测中...</div>
            </div>
        </div>
        
        <div class="mt-8 text-center">
            <a href="index.html" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium">
                前往主页
            </a>
            <a href="demo.html" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium ml-4">
                快速导航
            </a>
        </div>
        
        <div class="mt-8 p-4 bg-gray-800 rounded-lg">
            <h3 class="font-semibold mb-4">📊 测试结果总结</h3>
            <div id="test-summary">正在运行测试...</div>
        </div>
    </div>

    <script>
        // Test functions
        async function runTests() {
            let passCount = 0;
            let totalTests = 6;
            
            // Test 1: Page load
            try {
                document.getElementById('load-status').textContent = '✅ 页面加载成功';
                document.getElementById('test-load').className = 'test-item test-pass';
                passCount++;
            } catch (e) {
                document.getElementById('load-status').textContent = '❌ 页面加载失败';
                document.getElementById('test-load').className = 'test-item test-fail';
            }
            
            // Test 2: Ethers.js
            try {
                if (typeof ethers !== 'undefined') {
                    document.getElementById('ethers-status').textContent = '✅ Ethers.js v' + ethers.version;
                    document.getElementById('test-ethers').className = 'test-item test-pass';
                    passCount++;
                } else {
                    throw new Error('Ethers not found');
                }
            } catch (e) {
                document.getElementById('ethers-status').textContent = '❌ Ethers.js 未加载';
                document.getElementById('test-ethers').className = 'test-item test-fail';
            }
            
            // Test 3: MetaMask
            try {
                if (typeof window.ethereum !== 'undefined') {
                    document.getElementById('metamask-status').textContent = '✅ MetaMask 已安装';
                    document.getElementById('test-metamask').className = 'test-item test-pass';
                    passCount++;
                } else {
                    throw new Error('MetaMask not found');
                }
            } catch (e) {
                document.getElementById('metamask-status').textContent = '❌ MetaMask 未安装';
                document.getElementById('test-metamask').className = 'test-item test-fail';
            }
            
            // Test 4: Navigation
            try {
                const navLinks = document.querySelectorAll('a[href*="html"]');
                if (navLinks.length >= 2) {
                    document.getElementById('nav-status').textContent = `✅ 找到 ${navLinks.length} 个导航链接`;
                    document.getElementById('test-navigation').className = 'test-item test-pass';
                    passCount++;
                } else {
                    throw new Error('Not enough navigation links');
                }
            } catch (e) {
                document.getElementById('nav-status').textContent = '❌ 导航功能异常';
                document.getElementById('test-navigation').className = 'test-item test-fail';
            }
            
            // Test 5: Contract addresses (simulate)
            try {
                const contractAddresses = {
                    CRYPTOLAUNCH: '0x5FbDB2315678afecb367f032d93F642f64180aa3',
                    DEX: '0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0'
                };
                if (contractAddresses.CRYPTOLAUNCH && contractAddresses.DEX) {
                    document.getElementById('contract-status').textContent = '✅ 合约地址配置正确';
                    document.getElementById('test-contracts').className = 'test-item test-pass';
                    passCount++;
                } else {
                    throw new Error('Contract addresses not configured');
                }
            } catch (e) {
                document.getElementById('contract-status').textContent = '❌ 合约地址配置错误';
                document.getElementById('test-contracts').className = 'test-item test-fail';
            }
            
            // Test 6: UI elements
            try {
                const requiredElements = ['test-load', 'test-ethers', 'test-metamask'];
                const foundElements = requiredElements.filter(id => document.getElementById(id));
                if (foundElements.length === requiredElements.length) {
                    document.getElementById('ui-status').textContent = '✅ UI 组件正常';
                    document.getElementById('test-ui').className = 'test-item test-pass';
                    passCount++;
                } else {
                    throw new Error('Missing UI elements');
                }
            } catch (e) {
                document.getElementById('ui-status').textContent = '❌ UI 组件缺失';
                document.getElementById('test-ui').className = 'test-item test-fail';
            }
            
            // Update summary
            const successRate = (passCount / totalTests * 100).toFixed(1);
            const summaryHtml = `
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div>
                        <div class="text-2xl font-bold text-green-400">${passCount}</div>
                        <div class="text-sm text-gray-400">通过</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-red-400">${totalTests - passCount}</div>
                        <div class="text-sm text-gray-400">失败</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-blue-400">${successRate}%</div>
                        <div class="text-sm text-gray-400">成功率</div>
                    </div>
                </div>
            `;
            document.getElementById('test-summary').innerHTML = summaryHtml;
        }
        
        // Run tests when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(runTests, 1000);
        });
    </script>
</body>
</html>